{"ast":null,"code":"import { createAction, handleActions } from \"redux-actions\";\nimport produce from \"immer\";\nimport { insertTodo, updateTodo, deleteTodo } from \"../lib/api\";\nimport * as api from \"../lib/api\";\nimport createRequestThunk from \"../lib/createRequestThunk\"; //액션타입 정의하기\n\nconst CHANGE_INPUT = \"todos/CHANGE_INPUT\"; //인풋 값을 변경\n\nconst INSERT = \"todos/INSERT\"; //todo 등록\n\nconst TOGGLE = \"todos/TOGGLE\"; //todo 체크\n\nconst REMOVE = \"todos/REMOVE\"; //todo제거\n\nconst EDIT = \"todos/Edit\"; //todo수정\n\nconst GET_TODOS = \"todos/GET_TODOS\";\nconst GET_TODOS_SUCCESS = \"todos/GET_TODOS_SUCCESS\"; //액션 생성함수 만들기\n\nexport const changeInput = createAction(CHANGE_INPUT, input => input);\nlet id = 1;\nexport const insert = createAction(INSERT, text => ({\n  id: id++,\n  text,\n  checked: false\n}));\nexport const toggle = createAction(TOGGLE, id => id);\nexport const remove = createAction(REMOVE, id => id);\nexport const edit = createAction(EDIT, id => id);\nexport const getTodos = createRequestThunk(GET_TODOS, api.getTodos);\nconst initialState = {\n  input: \"\",\n  todos: []\n}; //리듀서함수 만들기 (immer사용)\n\nconst todo = handleActions({\n  [CHANGE_INPUT]: (state, {\n    payload: input\n  }) => produce(state, draft => {\n    draft.input = input;\n  }),\n  [INSERT]: (state, {\n    payload: todo\n  }) => produce(state, draft => {\n    draft.todos.push(todo);\n    insertTodo(todo);\n  }),\n  [TOGGLE]: (state, {\n    payload: id\n  }) => produce(state, draft => {\n    const todo = draft.todos.find(todo => todo.id === id);\n    todo.checked = !todo.checked;\n    updateTodo(todo);\n  }),\n  [REMOVE]: (state, {\n    payload: id\n  }) => produce(state, draft => {\n    const index = draft.todos.findIndex(todo => todo.id === id);\n    draft.todos.splice(index, 1);\n    deleteTodo(id);\n  }),\n  [EDIT]: (state, {\n    payload: id\n  }) => produce(state, draft => {\n    const todo = draft.todos.find(todo => todo.id === id);\n    let newtext = window.prompt(\"ToDo 수정\", todo.text);\n    if (newtext != null) todo.text = newtext;\n    updateTodo(todo);\n  }),\n  [GET_TODOS_SUCCESS]: (state, action) => ({ ...state,\n    todos: action.payload\n  })\n}, initialState);\nconsole.log(todos);\nexport default todo;","map":{"version":3,"sources":["/home/jihyeon/React/todo/frontend/src/modules/todo.js"],"names":["createAction","handleActions","produce","insertTodo","updateTodo","deleteTodo","api","createRequestThunk","CHANGE_INPUT","INSERT","TOGGLE","REMOVE","EDIT","GET_TODOS","GET_TODOS_SUCCESS","changeInput","input","id","insert","text","checked","toggle","remove","edit","getTodos","initialState","todos","todo","state","payload","draft","push","find","index","findIndex","splice","newtext","window","prompt","action","console","log"],"mappings":"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","sourcesContent":["import { createAction, handleActions } from \"redux-actions\";\nimport produce from \"immer\";\nimport { insertTodo, updateTodo, deleteTodo } from \"../lib/api\";\nimport * as api from \"../lib/api\";\nimport createRequestThunk from \"../lib/createRequestThunk\";\n\n//액션타입 정의하기\nconst CHANGE_INPUT = \"todos/CHANGE_INPUT\"; //인풋 값을 변경\nconst INSERT = \"todos/INSERT\"; //todo 등록\nconst TOGGLE = \"todos/TOGGLE\"; //todo 체크\nconst REMOVE = \"todos/REMOVE\"; //todo제거\nconst EDIT = \"todos/Edit\"; //todo수정\n\nconst GET_TODOS = \"todos/GET_TODOS\";\nconst GET_TODOS_SUCCESS = \"todos/GET_TODOS_SUCCESS\";\n\n//액션 생성함수 만들기\nexport const changeInput = createAction(CHANGE_INPUT, (input) => input);\n\nlet id = 1;\nexport const insert = createAction(INSERT, (text) => ({\n  id: id++,\n  text,\n  checked: false,\n}));\n\nexport const toggle = createAction(TOGGLE, (id) => id);\n\nexport const remove = createAction(REMOVE, (id) => id);\n\nexport const edit = createAction(EDIT, (id) => id);\n\nexport const getTodos = createRequestThunk(GET_TODOS, api.getTodos);\n\nconst initialState = {\n  input: \"\",\n  todos: [],\n};\n\n//리듀서함수 만들기 (immer사용)\nconst todo = handleActions(\n  {\n    [CHANGE_INPUT]: (state, { payload: input }) =>\n      produce(state, (draft) => {\n        draft.input = input;\n      }),\n    [INSERT]: (state, { payload: todo }) =>\n      produce(state, (draft) => {\n        draft.todos.push(todo);\n        insertTodo(todo);\n      }),\n    [TOGGLE]: (state, { payload: id }) =>\n      produce(state, (draft) => {\n        const todo = draft.todos.find((todo) => todo.id === id);\n        todo.checked = !todo.checked;\n        updateTodo(todo);\n      }),\n    [REMOVE]: (state, { payload: id }) =>\n      produce(state, (draft) => {\n        const index = draft.todos.findIndex((todo) => todo.id === id);\n        draft.todos.splice(index, 1);\n        deleteTodo(id);\n      }),\n    [EDIT]: (state, { payload: id }) =>\n      produce(state, (draft) => {\n        const todo = draft.todos.find((todo) => todo.id === id);\n        let newtext = window.prompt(\"ToDo 수정\", todo.text);\n        if (newtext != null) todo.text = newtext;\n        updateTodo(todo);\n      }),\n    [GET_TODOS_SUCCESS]: (state, action) => ({\n      ...state,\n      todos: action.payload,\n    }),\n  },\n  initialState\n);\nconsole.log(todos);\n\nexport default todo;\n"]},"metadata":{},"sourceType":"module"}